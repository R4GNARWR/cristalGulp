const swiperAlike=new Swiper(".flats-detail__alike-swiper",{navigation:{nextEl:".flats-detail__alike-swiper-next",prevEl:".flats-detail__alike-swiper-prev"},breakpoints:{320:{slidesPerView:1,spaceBetween:20},576:{slidesPerView:2},768:{slidesPerView:3,spaceBetween:20},991:{slidesPerView:4,spaceBetween:30},1400:{slidesPerView:5,spaceBetween:57}}}),swiperViews=new Swiper(".swiper-flat-views",{slidesPerView:1,navigation:{nextEl:".swiper-flat-views__next",prevEl:".swiper-flat-views__prev"},pagination:{el:".swiper-flat-views__pagination"}});
const navigation=document.querySelector(".navigation"),menuBtn=document.querySelector(".header-menu__lines"),documentsList=document.querySelector(".documents-list"),progressList=document.querySelector(".progress-list"),paralaxPatterns=document.querySelectorAll(".pattern-paralax"),flatVisualContainers=document.querySelectorAll(".flats-visual"),flatVisualChangeButtons=document.querySelectorAll(".flats-filter__visual-type");function addClass(e,t){e.classList.contains(t)||e.classList.add(t)}function removeClass(e,t){e.classList.contains(t)&&e.classList.remove(t)}function toggleClass(e,t){e.classList.contains(t)?e.classList.remove(t):e.classList.add(t)}function setListMaxHeight(e,t){if(e&&t){let a=e.children[0].offsetHeight;e.style.maxHeight=a*t+"px"}}function changeFlatsVisual(e,t){flatVisualContainers&&t&&flatVisualContainers.forEach(e=>{e===t?removeClass(e,"d-none"):addClass(e,"d-none")}),flatVisualChangeButtons&&e&&flatVisualChangeButtons.forEach(t=>{t===e?addClass(t,"active"):removeClass(t,"active")})}function getBlockPosition(e){return[e.offsetTop,e.offsetTop+e.offsetHeight]}function observeParalaxBlock(e,t){new IntersectionObserver((function(t){t.forEach((function(t){t.isIntersecting?setParalax(e):e.style.removeProperty("top")}))})).observe(t)}function calculateParalax(e,t){e.style.top="bottom"===t?e.offsetTop+3+"px":e.offsetTop-3+"px"}new WOW({mobile:!1}).init(),Fancybox.defaults.closeButton=!1,Fancybox.bind("[data-fancybox]",{}),$("[data-range]").ionRangeSlider(),documentsList&&setListMaxHeight(documentsList,7),window.addEventListener("resize",()=>{documentsList&&setListMaxHeight(documentsList,7)}),menuBtn&&menuBtn.addEventListener("click",()=>{toggleClass(menuBtn,"active"),toggleClass(navigation,"active")}),progressList&&(progressList.childElementCount<2?(document.querySelector(".progress__pattern-2").classList.add("d-none"),document.querySelector(".progress__pattern-3").classList.add("d-none")):progressList.offsetHeight<3&&document.querySelector(".progress__pattern-3").classList.add("d-none"));let lastScroll=0;function setParalax(e){lastScroll<window.pageYOffset?(console.log(e),calculateParalax(e,"bottom")):lastScroll>window.pageYOffset&&calculateParalax(e,"top"),lastScroll=window.pageYOffset}function isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}function accessWebVr(e,t){unloadPlayer(),eventUnloadPlugins(),loadPlayer(!0,e,t)}function accessStdVr(e,t){unloadPlayer(),resetValuesForPlugins(),loadPlayer(!1,e,t)}function loadPlayer(e,t,a){embedpano({id:"krpanoSWFObject",xml:"indexdata/index.xml",target:"panoDIV",passQueryParameters:!0,bgcolor:"#000000",html5:"auto",vars:{startscene:t,starttime:a},webglsettings:{preserveDrawingBuffer:!1,depth:!0,stencil:!0}})}function unloadPlayer(){jQuery("#krpanoSWFObject")&&(null!=getCurrentTourPlayer()&&getCurrentTourPlayer().call("stopTourSounds();"),currentPanotourPlayer=null,removepano("krpanoSWFObject"))}window.addEventListener("scroll",(function(){paralaxPatterns&&paralaxPatterns.forEach(e=>{observeParalaxBlock(e,e.parentNode)})}));var currentPanotourPlayer=null;function getCurrentTourPlayer(){return null==currentPanotourPlayer&&(currentPanotourPlayer=document.getElementById("krpanoSWFObject")),currentPanotourPlayer}function isVRModeRequested(){for(var e=window.location.search.substring(1).split("&"),t=0;t<e.length;t++)if("vr"==e[t].toLowerCase())return!0;return!1}
function initMaps(){ymaps.ready(()=>{const e=document.querySelectorAll(".map");e.length>0&&e.forEach(e=>{const o=e.dataset;e.innerHTML='<div id="ymap_ctrl_display" style="display: none; width: 100%; height: 100%; position: absolute; background-color: rgba(0, 0, 0, 0.5); z-index: 100; pointer-events: none;"><div style="position: relative; top: 50%; left: 0; right: 0; color: white; text-align: center; font-size: 1.8em; pointer-events: none;">Чтобы изменить масштаб, прокручивайте карту, удерживая клавишу Ctrl.</div></div>';let t=new ymaps.Map(e,{center:[o.lat,o.lng],zoom:o.zoom,controls:[]});if(o.dots){JSON.parse(o.dots).forEach(e=>{dotPlacemark=new ymaps.Placemark([e.lat,e.lng],{},{iconLayout:"default#image",iconImageHref:e.image||"",iconImageSize:[30,42],iconImageOffset:[-5,-38]}),t.geoObjects.add(dotPlacemark)})}if(t.behaviors.disable("scrollZoom"),window.innerWidth>768){var a,n=!1,i=!1;t.events.add(["wheel","mousedown"],(function(e){"wheel"==e.get("type")&&(n?$("#ymap_ctrl_display").fadeOut(100):($("#ymap_ctrl_display").fadeIn(300),i=!0,clearTimeout(a),a=setTimeout((function(){$("#ymap_ctrl_display").fadeOut(300),i=!1}),1500))),"mousedown"==e.get("type")&&i&&$("#ymap_ctrl_display").fadeOut(100)})),$(document).keydown((function(e){17!==e.which||n||(n=!0,t.behaviors.enable("scrollZoom"))})),$(document).keyup((function(e){17===e.which&&(n=!1,t.behaviors.disable("scrollZoom"))}))}})})}
var refreshTimeout,numPointsX,numPointsY,unitWidth,unitHeight,points,refreshDuration=5e3;function onLoad(t){var i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("width",t.offsetWidth),i.setAttribute("height",t.offsetHeight),t.appendChild(i);var n=(t.offsetWidth+t.offsetHeight)/20;numPointsX=Math.ceil(t.offsetWidth/n)+1,numPointsY=Math.ceil(t.offsetHeight/n)+1,unitWidth=Math.ceil(t.offsetWidth/(numPointsX-1)),unitHeight=Math.ceil(t.offsetHeight/(numPointsY-1)),points=[];for(var e=0;e<numPointsY;e++)for(var o=0;o<numPointsX;o++)points.push({x:unitWidth*o,y:unitHeight*e,originX:unitWidth*o,originY:unitHeight*e});randomize(points);for(var r=0;r<points.length;r++)if(points[r].originX!=unitWidth*(numPointsX-1)&&points[r].originY!=unitHeight*(numPointsY-1))for(var s=points[r].x,u=points[r].y,a=points[r+1].x,h=points[r+1].y,m=points[r+numPointsX].x,p=points[r+numPointsX].y,d=points[r+numPointsX+1].x,f=points[r+numPointsX+1].y,g=Math.floor(2*Math.random()),l=0;l<2;l++){var c=document.createElementNS(i.namespaceURI,"polygon");0==g?0==l?(c.point1=r,c.point2=r+numPointsX,c.point3=r+numPointsX+1,c.setAttribute("points",s+","+u+" "+m+","+p+" "+d+","+f)):1==l&&(c.point1=r,c.point2=r+1,c.point3=r+numPointsX+1,c.setAttribute("points",s+","+u+" "+a+","+h+" "+d+","+f)):1==g&&(0==l?(c.point1=r,c.point2=r+numPointsX,c.point3=r+1,c.setAttribute("points",s+","+u+" "+m+","+p+" "+a+","+h)):1==l&&(c.point1=r+numPointsX,c.point2=r+1,c.point3=r+numPointsX+1,c.setAttribute("points",m+","+p+" "+a+","+h+" "+d+","+f))),c.setAttribute("fill","rgba(0,0,0,"+Math.random()/3+")");var P=document.createElementNS("http://www.w3.org/2000/svg","animate");P.setAttribute("fill","freeze"),P.setAttribute("attributeName","points"),P.setAttribute("dur",refreshDuration+"ms"),P.setAttribute("calcMode","linear"),c.appendChild(P),i.appendChild(c)}refresh(t,points)}function randomize(t){for(var i=0;i<t.length;i++)0!=t[i].originX&&t[i].originX!=unitWidth*(numPointsX-1)&&(t[i].x=t[i].originX+Math.random()*unitWidth-unitWidth/2),0!=t[i].originY&&t[i].originY!=unitHeight*(numPointsY-1)&&(t[i].y=t[i].originY+Math.random()*unitHeight-unitHeight/2)}function refresh(t,i){randomize(i);for(var n=0;n<t.querySelector("svg").childNodes.length;n++){var e=t.querySelector("svg").childNodes[n],o=e.childNodes[0];o.getAttribute("to")&&o.setAttribute("from",o.getAttribute("to")),o.setAttribute("to",i[e.point1].x+","+i[e.point1].y+" "+i[e.point2].x+","+i[e.point2].y+" "+i[e.point3].x+","+i[e.point3].y),o.beginElement()}refreshTimeout=setTimeout(()=>{refresh(t,i)},refreshDuration)}function onResize(t){t.querySelector("svg").remove(),clearTimeout(refreshTimeout),onLoad(t)}document.querySelectorAll(".pattern-mobile").forEach(t=>{(window.innerWidth<992&&!t.classList.contains("main-slider")||t.classList.contains("main-slider"))&&(window.onload=onLoad(t),window.onresize=onResize(t))});
window.addEventListener("DOMContentLoaded",(function(){setTimeout((function(){document.getElementById("preloadWrap").classList.add("hidden")}),3400)}));
const mainSliderContentText=document.querySelector(".main-slider__content .text"),mainSliderContentBtnText=document.querySelector(".main-slider__content .btn"),architectureSliderContentLabel=document.querySelector(".main-architecture__slider-content .label"),architectureSliderContentText=document.querySelector(".main-architecture__slider-content .text"),secontTypeSliders=document.querySelectorAll(".secondTypeSlider"),mainSwiper=new Swiper(".main-swiper",{loop:!0,breakpoints:{0:{navigation:{nextEl:".main-slider__navigation-next-mob",prevEl:".main-slider__navigation-prev-mob"},pagination:{el:".main-slider__pagination-mob"}},991:{navigation:{nextEl:".main-slider__navigation-next",prevEl:".main-slider__navigation-prev"},pagination:{el:".main-slider__pagination"}}}});mainSwiper.on("slideChange",()=>{const e=mainSwiper.slides[mainSwiper.activeIndex],t=e.dataset.text,n=e.dataset.btnText;mainSliderContentText&&t&&(mainSliderContentText.innerHTML=t),mainSliderContentBtnText&&n&&(mainSliderContentBtnText.text=n)}),secontTypeSliders.forEach(e=>{const t=e.getAttribute("id"),n=document.querySelector("."+t+"-content .label"),i=document.querySelector("."+t+"-content .text"),a=new Swiper(e,{loop:!0,effect:"fade",pagination:{el:"."+t+"-slider__pagination"},navigation:{nextEl:"."+t+"-slider__navigation-next",prevEl:"."+t+"-slider__navigation-prev"}});a.on("slideChange",()=>{const e=a.slides[a.activeIndex],t=e.dataset.label,r=e.dataset.text;n&&r&&(n.innerHTML=t),i&&r&&(i.innerHTML=r)})});const architectureSwiper=new Swiper(".main-architecture__slider",{loop:!0,pagination:{el:".main-architecture__pagination"},navigation:{nextEl:".main-architecture__navigation-next",prevEl:".main-architecture__navigation-prev"}});architectureSwiper.on("slideChange",()=>{const e=architectureSwiper.slides[architectureSwiper.activeIndex],t=e.dataset.text,n=e.dataset.btnText;architectureSliderContentLabel&&n&&(architectureSliderContentLabel.innerHTML=t),architectureSliderContentText&&n&&(architectureSliderContentText.innerHTML=n)});const panoSlider=new Swiper(".main-architecture__pano-slider",{loop:!0,navigation:{nextEl:".architecture-pano__navigation-next",prevEl:".architecture-pano__navigation-prev"}});
//# sourceMappingURL=../sourcemaps/main.min.js.map
